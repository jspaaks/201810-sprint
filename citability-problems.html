<html>
    <head>
        <script type="application/javascript">
            const url = 'https://www.research-software.nl/api/software_cache';

            // citability
            fetch(url)
            .then((resp) => resp.json())
            .then(function(items) {
                document.write('<h1>Insufficient citability</h1><ol>')
                return items.forEach(function(item) {
                    if (item.isPublished && item.latestCodemeta === null) {
                        let contact = item.contributors.find((contributor) => {return contributor.isContactPerson});
                        if (contact === undefined) {
                            document.write('<li>' + item.brandName + ' no contact person</li>')
                        } else {
                            document.write('<li>' + item.brandName + ' ' + contact.foreignKey.givenNames + ' ' + contact.foreignKey.familyNames + '</li>')
                        }
                    }
                })
                document.write('</ol>')
            })
            .catch(function(error) {
                console.log(JSON.stringify(error));
            });

        </script>
    </head>

    <body>
    </body>
</html>
